function trace(n){window.opera?opera.postError(n):window.debugService?typeof n=="object"?window.debugService.inspect("trace",n):window.debugService.trace(n):window.console?console.dir&&typeof n=="object"?console.dir(n):console.log(n):alert(n)}!function(n){n.include=function(t,i){function c(t,i,s,c,l){c=r.createElement("script"),e++,c.onload=c.onreadystatechange=function(r,e){e=0,r=this.readyState||r.type,r.search("load|complete")||l||(s?(t=function(){n[s]?h(i):setTimeout(t,u),++e>u&&(t=f)})():h(i),l=u)},c.async=!0,c.src=t,r[o].appendChild(c)}function h(n){n(),--e||i()}var r=document,o="body",f=function(){},s={},e=0,u=1;t.pop||(t=[t]),i=i||f,!function l(n,h,a,v){if(!r[o])return setTimeout(l,u);h=r.getElementsByTagName("script"),v=f;for(n in h)h[n].src&&(s[h[n].src]=n);for(n=t.length;n--;)t[n].pop?(h=t[n][0],v=t[n][1],a=t[n][2]):h=t[n],s[h]?v():c(h,v,a);e||i()}()}}(this),window.Date.prototype.f=function(n){var w,l;n=n+"";var a=["January","February","March","April","May","June","July","August","September","October","November","December"],h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=function(n){return(n<0||n>9?"":"0")+n},u=this,e="",o=0,f=u.getYear()+"",s=u.getMonth()+1,v=u.getDate(),c=u.getDay(),i=u.getHours(),y=u.getMinutes(),p=u.getSeconds(),t={};for(f.length<4&&(f=""+(+f+1900)),t.y=""+f,t.yyyy=f,t.yy=f.substr(2,4),t.M=s,t.MM=r(s),t.MMM=a[s-1],t.NNN=a[s-1].substr(0,3),t.N=a[s-1].substr(0,1),t.d=v,t.dd=r(v),t.e=h[c].substr(0,1),t.ee=h[c].substr(0,2),t.E=h[c].substr(0,3),t.EE=h[c],t.H=i,t.HH=r(i),t.h=i==0?12:i>12?i-12:i,t.hh=r(t.h),t.K=i>11?i-12:i,t.k=i+1,t.KK=r(t.K),t.kk=r(t.k),t.a=i>11?"PM":"AM",t.m=y,t.mm=r(y),t.s=p,t.ss=r(p);o<n.length;){for(w=n.charAt(o),l="";n.charAt(o)==w&&o<n.length;)l+=n.charAt(o++);e=t[l]!=null?e+t[l]:e+l}return e},function(n){"use strict";var hi,yt,si;n.efx||(n.efx={}),String.isNullOrEmpty||(String.isNullOrEmpty=function(n){return n?n.toString().replace(/^\s*|\s*$/g,"")==="":!0}),String.format||(hi=new RegExp(/{(\d+)}|{(\d+):([^\r\n{}]+)}/g),String.format=function(n,t){t instanceof Array||(t=Array.prototype.slice.call(arguments,1));for(var r,i,f,u,e=n;(r=hi.exec(n))!=null;)i=t[parseInt(r[1]||r[2],10)],f=r[3]||"",u=ht(i)?"":i.toFormattedString?i.toFormattedString(f):i.format?i.format(f):i.toString(),e=e.split(r[0]).join(u);return e});var t="/rpc.axd",pt={},ft={},et={},ci,ot,st,wt,bt,i={},kt={},li=function(){return document.getElementById("tsc_content")},lr=function(n){return kt[n]},ht=function(n){return n===ci?!0:n===null?!0:!1},h=function(n,t){for(t=t.toUpperCase();n&&n.parentNode;)if(n=n.parentNode,n.nodeType===1&&n.nodeName.toUpperCase()===t)return n;return null},p=function(n,t){return ft[t]||(ft[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")),ft[t].test(n.className)},c=function(n,t){p(n,t)||(n.className=((n.className||"")==""?"":n.className+" ")+t)},ai=function(n,t){(et[t]||(et[t]=new RegExp("(^|\\s)"+t)),String.isNullOrEmpty(t))||(n.className=n.className.replace(et[t],"").replace(/^\s+|(\s)\s+/g,"$1"))},l=function(n,t){n.style.display=t?"block":"none"},dt=function(n){n.parentNode.removeChild(n)},vi=function(n,t){return t?{w:n.offsetWidth,h:n.offsetHeight}:{w:n.clientWidth,h:n.clientHeight}},ct=function(){wt&&!st&&typeof ot!="undefined"&&ot&&bt&&(st=!0,efx.showScreen("listQuotesScreen"))},w,b,yi=function(t){if(b)throw new Error("Resize event already hooked");b=!0,w=n.onresize,n.onresize=ni(n,function(n){t(),w&&w(n)})},pi=function(){b&&(b=!1,n.onresize=w)},wi="preventDefault stopPropagation type altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),bi=function(n){var t={};return wi.forEach(function(i){t[i]=n[i]}),t.originalEvent=n,t},gt=function(n,t){return function(i){var u,f;i=i||window.event;var r=i.$cloned?i:bi(i),e=i.target,o=i.type;for(r.$cloned=!0,r.currentTarget=n,r.stop=function(){i.stopPropagation(),i.preventDefault()},o.match(/(click|mouse|menu)/i)&&(ht(r.pageX)&&!ht(r.clientX)&&(u=document.documentElement,f=document.body,r.pageX=r.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),r.pageY=r.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)),o.match(/DOMMouseScroll|mousewheel/)&&(r.wheelDelta=i.wheelDelta?i.wheelDelta/120:-(i.detail||0)/3));e&&e.nodeType==3;)e=e.parentNode;r.target=e,t(r,n)}},ki=function(n,t){var i=gt(n,t);return function(){var t=window.event;t.target=t.srcElement,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},i(t),t.target=t.relatedTarget=t.preventDefault=t.stopPropagation=t=null}},ni=document.addEventListener?gt:ki,ti=function(n,t){n.onclick=ni(n,t)},o=function(n,t){return n.getAttribute(t)||(n.attributes[t]?n.attributes[t].nodeValue:null)},di=function(n){var t=n.nodeName.toLowerCase();switch(t){case"textarea":return t;case"select":return String.isNullOrEmpty(o(n,"multiple"))?t:"select-multiple";case"input":return o(n,"type")}return t},s=function(n,t){var u=[],r,o=0,i,s,e=[],h=di(n),c;s=n.name||"",s!==""&&(e=f(document.getElementsByName(s)));switch(h){case"select":r=n.options[n.selectedIndex],i=r.value||r.text;break;case"select-multiple":for(i=[];(r=n.selectedIndex)!==-1;)(u[u.length]=n.options[r]).selected=!1,i[i.length]=r;return u.forEach(function(n){n.selected=!0}),i;case"checkbox":return i=[],e.forEach(function(n){(n.checked||n.selected)&&(u[u.length]=n,i[i.length]=n.value)}),i;case"radio":for(c=e.length;o<c;++o)if(r=e[o++],r.checked||r.selected){i=r.value;break}break;default:i=n.value}return t?[i]:i},ii=function(n){var t=document.createElement("b");return t.className="loading",t.appendChild(document.createTextNode("Loading...")),n.appendChild(t),t},ri=function(n){return{ID:n.ID,ContentType:n.ContentType,Selected:n.Selected,Name:n.Name,LastModificationDate:n.LastModificationDate}},k=function(n){var t,i,r;if(!n)return 0;if(n.Selected)return 2;if(t=n.Children,i=t&&Object.keys(t),!i)return 0;for(r=0;r<i.length;++r)if(k(t[i[r]])!=0)return 1;return 0},lt=function(n){if(!n||!n.ID)return null;var i=n.Children,t=[],r=ri(n);return n.Selected?r:k(n)==1&&i?(Object.keys(i).forEach(function(n){var r=i[n],u=lt(r);r&&u&&(t[t.length]=u)}),t.length&&(r.Children=t),r):null},ui=function(n){if(!n||!n.ID)return null;var t,i,r=n.Children,u={},f=ri(n);if(r){for(t=0;t<r.length;++t)i=r[t],u[i.ID]=ui(i);t&&(f.Children=u)}return f},d=function(n,t,i){return{ID:n,ContentType:t||"Other",Selected:!1,Name:i||"",Children:{},LastModificationDate:new Date}},gi=function(n,i,e,s){e=e||d(i);var l=ii(n),h="tsc_optionsId_"+i,a=new r(t,function(t){dt(l);var r=document.createElement("ul");r.setAttribute("id",h),c(r,"tsc_options"),t.forEach(function(n){var f=document.createElement("li"),u=document.createElement("label"),o=document.createElement("span"),t=document.createElement("input"),s=e.Children[n.ID];u.setAttribute("unselectable","on"),t.setAttribute("type","checkbox"),t.setAttribute("name","tsc_options_"+i),t.setAttribute("value",n.ID),t.checked=s&&s.Selected,u.appendChild(t),u.appendChild(o),o.appendChild(document.createTextNode(n.Name)),f.appendChild(u),r.appendChild(f)}),n.appendChild(r)},function(n){u(String.format("Failed to retrieve options. {0}",n),"error")});a.execute("GetChildren",i,s,i),this.getSelected=function(){var t=document.getElementById(h),n;return t?(n=f(t.getElementsByTagName("input")),n&&n.length&&n.forEach(function(n){var t=o(n,"value"),i;n.checked?(i=e.Children[t]||(e.Children[t]=d(t)),i.Selected=!0,i.LastModificationDate=new Date):e.Children[t]=null}),lt(e)):!1}},nr=function(n,i,e,s){e=e||d(i);var w={},v=function(n,t){var i=b(n.value);i.LastModificationDate=new Date,n.nextSibling&&(n.nextSibling.className="tsc_checkstate"+t);switch(t){case 0:n.removeAttribute("disabled"),i.Selected=n.checked=!1;return;case 1:n.setAttribute("disabled","disabled"),i.Selected=!(n.checked=!0);return;case 2:n.removeAttribute("disabled"),i.Selected=n.checked=!0;return}},a=function(n,t){v(h(n,"li").getElementsByTagName("input")[0],t)},ut=function(n,t){n.stop(),t=document.getElementById(o(t,"for"));var i=b(t.value),r=String.isNullOrEmpty(o(t,"disabled"));r&&v(t,t.checked?0:2),tt(t,t.checked),g(i,t.checked),nt(t)},b=function(n){for(var u,t=[],i=e,r;u=w[n];)t[t.length]=n.split("|")[1],n=u;for(t.reverse(),r=0;r<t.length;++r)i=i.Children[t[r]];return i},g=function(n,t){n.Selected=t,n.LastModificationDate=new Date;var i=n.Children,r=i&&Object.keys(i);r&&r.length&&r.forEach(function(n){g(i[n],t)})},nt=function(n){var t=h(n,"ul"),r,i;t.length!=0&&(r=it(t),i=0,r.forEach(function(n){n.checked&&++i}),t=h(t,"li"),t!=null)&&(t=t.getElementsByTagName("input"),t.length!==0)&&(n=t[0],i===r.length?a(n,2):i>0?a(n,1):a(n,0),nt(n))},tt=function(n,t){n.removeAttribute("disabled"),t?a(n,2):a(n,0);var i=ft(n);i!=null&&it(i).forEach(function(n){var i=n.value.split("|")[0];n.checked=t,t?a(n,2):a(n,0),(i==="Mixed"||i==="Folder")&&tt(n,t)})},ft=function(n){n=h(n,"li").childNodes;for(var i=n.length,t;i>0;)if(t=n[--i],t.nodeName.toUpperCase()==="UL")return t;return null},it=function(n){var t=[];return f(n.children).forEach(function(n){n.nodeName.toUpperCase()==="LI"&&f(n.getElementsByTagName("input")).forEach(function(i){i.parentNode==n&&t.push(i)})}),t},et=function(n,t){n.stop();var u=t.href.split("|"),i=h(t,"li"),r="open";p(t,r)?(ai(t,r),rt(i,!1)):(c(t,r),p(i,"loaded")?rt(i,!0):y(i,u[1],u[2],null,t.__enabledOptions,t.__parents))},rt=function(n,t){l(n.getElementsByTagName("ul")[0],t)},y=function(n,i,f,e,h,l){var a=ii(n),p=new r(t,function(t){dt(a);var r=document.createElement("ul"),i=n.getElementsByTagName("input");i=i.length?i[0].checked&&String.isNullOrEmpty(o(i[0],"disabled")):!1,String.isNullOrEmpty(e)||(r.className=e,r.setAttribute("id","tsc_treeId_"+f)),c(n,"loaded"),t.forEach(function(n){var t=document.createElement("li"),p=document.createElement("div"),s=document.createElement("label"),u=document.createElement("input"),b=f+n.ContentType+n.ID,o=h[n.ID]||(h[n.ID]=d(n.ID,n.ContentType,n.Name)),a=n.ContentType+"|"+n.ID,e,g,nt;t.className="tsc_"+n.ContentType,s.setAttribute("unselectable","on"),s.setAttribute("for",b),u.setAttribute("type","checkbox"),u.setAttribute("name","tsc_tree_"+f),w[a]=l,u.setAttribute("value",a),u.setAttribute("id",b),i?(v(u,2),p.className="tsc_checkstate2"):(v(u,k(o)),p.className="tsc_checkstate"+k(o)),ti(s,ut),(n.ContentType==="Folder"||n.ContentType==="Mixed")&&(e=document.createElement("a"),e.__enabledOptions=o.Children||(o.Children={}),e.__parents=a,e.setAttribute("href","#expand|"+n.ID+"|"+f),g=document.getElementById("tsc_expand_tree"),g.className!=="collapse"&&(nt="open",y(t,n.ID,f,null,o.Children||(o.Children={}),a),c(e,nt)),ti(e,et),e.appendChild(document.createTextNode("+")),t.appendChild(e),t.appendChild(document.createTextNode(" "))),s.appendChild(document.createTextNode(n.Name)),t.appendChild(u),t.appendChild(p),t.appendChild(s),r.appendChild(t)}),n.appendChild(r)},function(n){u(String.format("Failed to retrieve tree branch. {0}",n),"error")});p.execute("GetChildren",i,s,f)};y(n,"0",i,"tsc_tree",e.Children,"0"),this.getSelected=function(){return lt(e)}},tr=function(n,t,i,r,u){i=i||320,r=r||18;for(var h=0,e=0,l=n.getElementsByTagName("dl"),o=[],s,a,v=r+(u?"%":"px"),f=0;f<l.length;++f)s=l[f],s.parentNode==n&&p(s,"tsc_panel")&&(s.setAttribute("id","tsc_pane"+e),o[e]=s,++e);for(t>e&&(t=e),f=0;f<e;++f)o[o.length]=document.getElementById("tsc_pane"+f);this.draw=function(){var p=vi(n).w,w=p,g=t,l,s,b,d,y,nt,k;if(a!=p){if(a=p,u||(p-=r),p>i){for(f=t-1;f>=0;--f)if(w=p/(f+1),!(w<i)){g=f+1;break}}else g=1;if(w=u?(100-r)/g-r+"%":(w-r|0)+"px",b=[],d=[],h>0){for(f=0;f<e;++f)o[f].parentNode.removeChild(o[f]);for(f=0;f<h;++f)l=document.getElementById("column-"+f),l.parentNode.removeChild(l)}for(h=g,f=0;f<h;++f)y=document.createElement("div"),y.id="column-"+f,c(y,"tsc_multi_column"),y.style.width=w,y.style.marginLeft=v,n.appendChild(y),s=b.length,b[s]=y,d[s]=y.offsetHeight;for(f=0;f<e;++f){if(l=o[f],f<b.length)s=f;else for(nt=0,k=0;k<d.length;k++)(k==0||d[k]<nt)&&(nt=d[k],s=k);b[s]&&(l.parentNode&&l.parentNode.removeChild(l),b[s].appendChild(l),d[s]=b[s].offsetHeight)}}}},g=function(n,t){pi(),li().innerHTML=fi(n)(t||{})},fi=function ir(n,t){var i=/\W/.test(n)?new Function("obj","var p=[]; with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").replace(/'(?=[^{]*}})/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/{{=(.+?)}}/g,"',$1,'").split("{{").join("');").split("}}").join("p.push('")+"');}return p.join('');"):pt[n]=pt[n]||ir(document.getElementById(n).innerHTML);return t?i(t):i},rr=function(){if(n.XMLHttpRequest)return new n.XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return!1},ur="0123456789ABCDEF",fr=function(){for(var n=[],t=0;t<36;t++)n[t]=Math.floor(Math.random()*16);for(n[14]=4,n[19]=n[19]&3|8,t=0;t<36;t++)n[t]=ur[n[t]];return n[8]=n[13]=n[18]=n[23]="-",n.join("")},er=function(n,t){if(typeof t=="string"){var i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(?:([\+-])(\d{2})\:(\d{2}))?Z?$/.exec(t);if(i)return new Date(Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5],+i[6]))}return t},f=function(n,t){var r,i;for(t=t||0,r=[],i=t;i<n.length;i++)r.push(n[i]);return r},u=function(n,t){document.getElementById("tsc_messages").innerHTML="<div class='message "+(t||"info")+"'>"+n+"<\/div>"},ei=function(n,t){var i="";t.forEach(function(n){i+="<li>"+n+"<\/li>"}),document.getElementById("tsc_messages").innerHTML="<div class='message validation'><h4>"+n+"<\/h4><ul>"+i+"<\/ul><\/div>"},at=function(){document.getElementById("tsc_messages").innerHTML=""},nt=0,a=function(n){if(nt==0){var t=document.getElementById("tsc_working");t.innerHTML="<strong>"+(n||"Please Wait...")+"<\/strong>",l(t,!0)}++nt},v=function(){--nt,nt==0&&l(document.getElementById("tsc_working"),!1)},r=function(n,t,i,r){n=n+(n.indexOf("?")===-1?"?":"&")+"format=json";var u,o,s,c=0,l=function(n){!t||t(n)},e=function(n){!i||i(n)},a=function(){!r||r()},h=function(t){u=rr(),s=fr(),o=!0,u.onreadystatechange=function(){var i,n,r;if(u.readyState===4&&o){o=!1;try{i=u.status}catch(f){i=200}if(i>=200&&i<=300){if(n=u.responseText,r=!0,n.indexOf("{")===0){try{n=JSON.parse(n,er)}catch(f){r=!1,e("Exception "+f+". Data: "+n)}r&&(n.Error?e(n.Error):n.Id===s?l(n.Body):e(String.format("Invalid response. Sent ID doen't matches received ID. Data: {0}",n)))}}else{if(++c<3){delete u.onreadystatechange,u.onreadystatechange=null,h(t);return}e(u.statusText+":"+u.responseText)}delete u.onreadystatechange,u.onreadystatechange=null,a()}},u.open("POST",n+"&id="+s,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),u.setRequestHeader("Content-length",t.length),u.overrideMimeType&&(u.setRequestHeader("Connection","close"),u.overrideMimeType("application/json")),u.send(t)};this.execute=function(n){h(JSON.stringify({Method:n,Arguments:f(arguments,1)}))}},oi=function(n){var t=[];return Array.isArray(n)||(n=[n]),n.forEach(function(n){n.args||(n.args=[]),n.validator.apply(null,n.args)||t.push(n.message)}),t},vt=function(n){return n.length>0},or=function(n,t){return n.length>=t},sr=function(n,t){return t.indexOf(n)===-1},hr=function(n){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/i.test(n)},e=[],tt=[],it=[],rt,cr=function(n){var t;return e.forEach(function(i){i.ID===n&&(t=i)}),t},y=function(){g("main_tpl",{packages:e,quotes:tt,projects:it})},ut;efx.showScreen=function(n){ut&&clearTimeout(ut),ut=null,efx[n].apply(null,f(arguments,1))},efx.doConfirm=function(n,t){return window.confirm(n.split("\\n").join("\n"))&&t.apply(null,f(arguments,2)),!1},efx.listQuotesScreen=function(){new r(t,function(n){at(),e=[],tt=[],it=[],n.forEach(function(n){var t=n.Status;n.HumanStatus=t.replace(/([A-Z])/g," $1"),t=="QuoteOpen"?e.push(n):t.indexOf("Project")===-1?tt.push(n):it.push(n)}),y()},function(n){u(String.format("Failed to retrieve remote data. {0}",n),"error")},function(){ut=setTimeout(function(){efx.showScreen("listQuotesScreen")},2e4)}).execute("ListQuotes"),y();var n=document.getElementById("tsc_status"),i=function(){l(n,!1),n.innerHTML=""};new r(t,function(t){t&&t.length?(l(n,!0),n.innerHTML=fi("status_tpl")({statuses:t})):i()},i).execute("GetStatuses")},efx.deletePackage=function(n){new r(t,null,function(n){u(String.format("Failed to delete package. {0}",n),"error")}).execute("DeleteQuote",n,i.UserName),e.forEach(function(t,i,r){t.ID===n&&r.splice(i,1)}),y()},efx.createQuoteScreen=function(n){g("createQuote_tpl",{sourceLanguages:i.SourceLanguages,targetLanguages:i.TargetLanguages,quickQuote:n})},efx.showConfigurationScreen=function(n){g("config_tpl",{fromConfig:n,configuration:i})},efx.saveConfiguration=function(){at();var f=s(document.getElementById("tsc_tokenID")),n=s(document.getElementById("tsc_Endpoint")),o=new r(t,function(){i.AuthorizationToken=f,i.TscServerEndPoint=n,st=!1,efx.init()},function(n){u(String.format("Can not save configuration data. {0}",n),"error")},function(){v()}),e=oi([{validator:vt,args:[f],message:"The Authorization Token is required."},{validator:vt,args:[n],message:"The EndPoint URL is required."},{validator:hr,args:[n],message:"The EndPoint URL is not in a valid form."},]);if(e.length>0){ei("There were some errors while checking the form:",e);return}a(),o.execute("SaveConfiguration",f,n)},efx.createQuote=function(n){at();var l=new r(t,function(t){e.push(t),efx.addDocuments(t.ID,n)},function(n){u(String.format("Failed to create quote. {0}",n),"error")},function(){v()}),o=s(document.getElementById("tsc_Name")),h=s(document.getElementById("tsc_SourceLang")),f=s(document.getElementById("tsc_TargetLangs"),!0),c=oi([{validator:vt,args:[o],message:n?"The name of the quote is required.":"The name of the package is required."},{validator:or,args:[f,1],message:"You have to select at least one target language"},{validator:sr,args:[h,f],message:"You can not select as target language the selected source language"},]);if(c.length>0){ei("There were some errors while checking the form:",c);return}a(),l.execute("CreateQuote",o,s(document.getElementById("tsc_Notes")),h,f,i.UserName)},efx.requestAQuote=function(n,f){new r(t,function(){e.forEach(function(t,i,r){t.ID===n&&(t.HumanStatus="Quote In Progress",t.Status="QuoteInProgress",t.Name=String.format("Creating quote for: {0}",t.Name),tt.push(t),r.splice(i,1))}),f?efx.listQuotesScreen():y()},function(n){u(String.format("Failed to request a quote. {0}",n),"error")}).execute("SendQuoteToGpms",n,i.UserName,f||!1)},efx.addDocuments=function(n,f){a(),new r(t,function(t){var e,o,h,c;t=t||{},rt={},e=cr(n),o=e.SourceLanguageISOCode,g("add_documents_tpl",{quote:e,quickQuote:f});for(var l=i.DocumentBrowserPanes,s=document.getElementById("tsc_columns"),u={},r=t.length-1;r>=0;--r)h=t[r],u[h.ID]=ui(h);l.forEach(function(n){var i=document.createElement("dl"),f=document.createElement("dt"),r=document.createElement("dd"),t=n.ID;i.className="tsc_panel",f.appendChild(document.createTextNode(n.Name)),i.appendChild(f),i.appendChild(r),s.appendChild(i),rt[t]=t.indexOf("options_")==0?new gi(r,t,u[t],o):new nr(r,t,u[t],o)}),c=new tr(s,100,320,.833333,!0),c.draw(),yi(c.draw)},function(n){u(String.format("Failed to retrieve selected package items. {0}",n),"error")},function(){v()}).execute("ListPackageFiles",n)},efx.addSelectedDocuments=function(n,f){a();var e=[];Object.keys(rt).forEach(function(n){var t=rt[n].getSelected();t&&e.push(t)}),new r(t,function(){f?efx.requestAQuote(n,!0):efx.listQuotesScreen()},function(n){u(String.format("Failed to export selected documents. {0}",n),"error")},function(){v()}).execute("ModifyPackageFiles",n,i.UserName,e)},efx.importProject=function(n){a(),new r(t,function(){efx.listQuotesScreen()},function(n){u(String.format("Failed to import translations. {0}",n),"error")},function(){v()}).execute("Import",n,i.UserName)},efx.closeProject=function(n){new r(t,function(){it.forEach(function(t,i,r){t.ID===n&&r.splice(i,1)}),y()},function(n){u(String.format("Failed to close project. {0}",n),"error")}).execute("CloseQuote",n,i.UserName)},efx.addLangResource=function(n){kt=n},efx.init=function(){wt=!0,ct()},yt=[],si=function(){new r(t,function(n){i=n,bt=!0,ct()},function(n){u(String.format("Failed to retrieve configuration. {0}",n),"error")}).execute("GetConfiguration"),navigator&&(ot=!0),ct()},(typeof Array.isArray=="undefined"||typeof Array.prototype.forEach=="undefined"||typeof Object.keys=="undefined"||typeof Date.prototype.toISOString=="undefined"||typeof Date.prototype.toJSON=="undefined"||typeof String.prototype.trim=="undefined")&&yt.push('/<%=WebResource("TSC.WebClient.js.EcmaScript5.min.js")%>'),yt.length?n.include(yt,si):si()}(window);